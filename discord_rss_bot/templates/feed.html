{% extends "base.html" %}
{% block title %} | {{ feed.title }}{% endblock %}
{% block content %}
    <div class="p-2 mb-2 border border-dark" style="background: #161616;">

        {# The feed title.#}
        <h2>
            <a class="text-muted text-decoration-none" href="{{ feed.link }}">
                {{ feed.title }}
                {% if not feed.updates_enabled %}
                    - <span style="color: red">disabled</span>
                {% endif %}
            </a>
        </h2>

        {# Feed subtitle, probably description. #}
        {% if feed.subtitle %}
            <small class="text-muted text-decoration-none">{{ feed.subtitle }}</small>
            <br>
        {% endif %}

        {# When this feed was added.#}
        {% if feed.added %}
            Added: {{ feed.added.strftime('%Y-%m-%d, %T') }}
            <br>
        {% endif %}

        {# If this feed has had an error. #}
        {% if feed.last_exception %}
            Last exception: {{ feed.last_exception }}
            <br>
        {% endif %}

        {# Remove feed button. #}
        <div class="btn-group" role="group">
            <form action="/remove" method="post">
                <button class="btn btn-danger" type="submit" name="feed_url" value="{{ feed.url }}"
                        onclick="return confirm('Are you sure you want to delete this feed?')">
                    Remove feed
                </button>
            </form>
        </div>


    </div>
    {% for entry in entries %}
        <div class="p-2 mb-2 border border-dark" style="background: #161616;">
            <h2>
                <a class="text-muted text-decoration-none" href="{{ entry.link }}">
                    {{ entry.title }}
                </a>
            </h2>
            By {{ entry.author }}
            {% if entry.published %}
                @ {{ entry.published.strftime('%Y-%m-%d, %T') }}
            {% endif %}

            {% if entry.summary %}
                <details>
                    <summary>Summary</summary>
                    <div class="text-muted text-wrap" style="max-height: 450px; overflow-y: auto">
                        {{ entry.summary | safe }}
                    </div>
                </details>
            {% endif %}
            {% if entry.content %}
                <details>
                    <summary>Content</summary>
                    <div class="text-muted" style="max-height: 450px; overflow-y: auto">
                        {{ entry.content[0].value | safe }}
                    </div>
                </details>
            {% endif %}
        </div>
    {% endfor %}
{% endblock %}
